<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<f:metadata>
	<f:viewParam name="module" value="#{menuMB.modulo.idmodulo}" />
	<f:event type="preRenderView" listener="#{menuMB.updateMenu()}" />
</f:metadata>


<ui:composition template="/WEB-INF/templates/defaultLayout.xhtml">

	<!-- Definiendo la cabecera de la pagina -->
	<ui:define name="title">
		<h:outputText value="COOP" />
	</ui:define>

	<!-- content -->
	<ui:define name="menu-left">
		<ui:include src="/WEB-INF/menus/cuentasMenu.xhtml" />
	</ui:define>


	<!-- Definiendo el cuerpo de la pagina -->
	<ui:define name="content">

		<div class="sf-content-cabecera">
			<h2>Buscar Socio</h2>
		</div>

		<h:form>		
			<p:growl id="growl" sticky="true" />
			
			<div class="sf-agrupador-content">
				<div class="sf-agrupador-content-table">
					<table>
						<tbody>
							<tr>
								<td><h:outputLabel>Buscar:</h:outputLabel></td>
								<td>
									<p:inputText id="txtBuscar" 
										value="#{socioBean.valorBusqueda}" 
										size="80" 
										required="true" requiredMessage="Ingrese un valor de busqueda"> 
										<p:ajax update="growl" event="keyup" />
									</p:inputText>
									<p:watermark value="Buscar por: Codigo Socio, DNI y Apellidos y Nombres" for="txtBuscar" />
								</td>
								<td>
									<p:commandButton value="buscar"  
										actionListener="#{socioBean.buscarSocio()}" 
										update=":form-resultadoBusqueda"/>
								</td>
								<td>
									<p:selectOneMenu>
										<f:selectItem itemLabel="Persona natural"/>
									</p:selectOneMenu>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>			
		</h:form>
						
		<div class="buttons">
			<h:form id="form-buttons">
				<div class="tiptip">
					<p:commandLink styleClass="button left" title="Nueva busqueda">
						<span class="icon icon3"></span>
						<span class="label">Nuevo</span>
					</p:commandLink>
					
					<h:link styleClass="button middle" title="Editar Socio" outcome="mostrarDatosCliente.xhtml" target="_blank" >
				    	<span class="icon icon145"></span>
						<span class="label">Editar</span>	
				    	<f:param name="dni" value="#{socioBean.dniTemporal}" />
					</h:link>

					<h:commandLink action="#" styleClass="button right"
						title="Eliminar Socio">
						<span class="icon icon186"></span>
						<span class="label">Eliminar</span>
					</h:commandLink>
				</div>
				<div class="dropdown">
					<h:outputLink styleClass="button">
						<span class="icon icon96">&nbsp;</span>
						<span class="label">Otros</span>
						<span class="toggle">&nbsp;</span>
					</h:outputLink>
					<div class="dropdown-slider">
						<h:commandLink action="#" styleClass="ddm">
							<span class="icon icon96">&nbsp;</span>
							<span class="label">Vacaciones</span>
						</h:commandLink>
						<h:commandLink action="#" styleClass="ddm">
							<span class="icon icon96">&nbsp;</span>
							<span class="label">Mas</span>
						</h:commandLink>
						<h:commandLink action="#" styleClass="ddm">
							<span class="icon icon96">&nbsp;</span>
							<span class="label">Mas</span>
						</h:commandLink>
					</div>
					<!-- /.dropdown-slider -->
				</div>
				<!-- /.dropdown -->
			</h:form>
		</div>

		<div style="padding: 0px 5px;">
			<h:form id="form-resultadoBusqueda">
				<div>
					<p:dataTable id="table" var="socio"
						value="#{socioBean.tablaSocios.rows}"
						rowKey="#{socio}"
						selection="#{socioBean.tablaSocios.selectedRow}"
						selectionMode="single" paginator="true" paginatorPosition="bottom"
						rows="20" sortOrder="ascending"
						paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						rowsPerPageTemplate="50,100,200" widgetVar="tablaSocios"
						rowIndexVar="row">
														
						<p:ajax event="rowSelect" listener="#{socioBean.obtenerDNISeleccionado()}" update=":form-buttons"/>

						<p:column headerText="Nro" width="5%" style="text-align:center;">
							<h:outputText value="#{row + 1}" />
						</p:column>

						<p:column sortBy="#{socio.codigosocio}" headerText="Codigo Socio">
							<h:outputText value="#{socio.codigosocio}" />
						</p:column>
						
						<p:column sortBy="#{socio.dni}" headerText="DNI">
							<h:outputText value="#{socio.dni}" />
						</p:column>

						<p:column sortBy="#{socio.personanatural.apellidopaterno}"
							headerText="Apellido Paterno">
							<h:outputText value="#{socio.personanatural.apellidopaterno}" />
						</p:column>

						<p:column sortBy="#{socio.personanatural.apellidomaterno}"
							headerText="Apellido Materno">
							<h:outputText value="#{socio.personanatural.apellidomaterno}" />
						</p:column>
						
						<p:column sortBy="#{socio.personanatural.nombres}"
							headerText="Nombres">
							<h:outputText value="#{socio.personanatural.nombres}" />
						</p:column>
						
					</p:dataTable>

				</div>
			</h:form>
		</div>

	</ui:define>
</ui:composition>
</html>
